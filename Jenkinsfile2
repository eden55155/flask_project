pipeline {
    agent { label params['agent-name'] }
    
   parameters{
      agentParameter name:'agent-name'
   
    stages {
        stage('Clone repository') {
            steps {
            if (server_name == "slave2") {
            // Deploy build to server-1
            } else if (server_name == "slave3") {
            // Deploy build to server-2
            } else {
            error("Invalid server name: ${server_name}")
            git 'https://github.com/eden55155/flask_project.git'
            }
        }
        
    stage('Build Docker Image') {
      steps {
        sh "docker build -t projectflask ."
        sh "docker run --name flaskapp -p 5000:5000 -d -it projectflask"
      }
    }
}
}
